(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-047e0158"],{1957:function(e,t,a){},"66a2":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container",class:{isDark:e.isDark,activeSidebar:e.activeSidebar}},[e.show?[e.isZenMode?e._e():t("Toolbar"),t("Edit")]:e._e()],2)},n=[],o=a("5651"),s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"editContainer",on:{dragenter:function(t){return t.stopPropagation(),t.preventDefault(),e.onDragenter.apply(null,arguments)},dragleave:function(e){e.stopPropagation(),e.preventDefault()},dragover:function(e){e.stopPropagation(),e.preventDefault()},drop:function(e){e.stopPropagation(),e.preventDefault()}}},[t("div",{ref:"mindMapContainer",staticClass:"mindMapContainer",attrs:{id:"mindMapContainer"}}),e.isZenMode?e._e():t("Count",{attrs:{mindMap:e.mindMap}}),t("Navigator",{attrs:{mindMap:e.mindMap}}),e.isZenMode?e._e():t("NavigatorToolbar",{attrs:{mindMap:e.mindMap}}),t("OutlineSidebar",{attrs:{mindMap:e.mindMap}}),e.isZenMode?e._e():t("Style"),t("BaseStyle",{attrs:{data:e.mindMapData,mindMap:e.mindMap}}),e.mindMap?t("Theme",{attrs:{mindMap:e.mindMap}}):e._e(),t("Structure",{attrs:{mindMap:e.mindMap}}),t("ShortcutKey"),e.mindMap?t("Contextmenu",{attrs:{mindMap:e.mindMap}}):e._e(),e.mindMap?t("RichTextToolbar",{attrs:{mindMap:e.mindMap}}):e._e(),e.mindMap?t("NodeNoteContentShow",{attrs:{mindMap:e.mindMap}}):e._e(),e.mindMap?t("NodeAttachment",{attrs:{mindMap:e.mindMap}}):e._e(),e.mindMap?t("NodeImgPreview",{attrs:{mindMap:e.mindMap}}):e._e(),e.isZenMode?e._e():t("SidebarTrigger"),e.mindMap?t("Search",{attrs:{mindMap:e.mindMap}}):e._e(),e.mindMap?t("NodeIconSidebar",{attrs:{mindMap:e.mindMap}}):e._e(),e.mindMap?t("NodeIconToolbar",{attrs:{mindMap:e.mindMap}}):e._e(),e.mindMap?t("OutlineEdit",{attrs:{mindMap:e.mindMap}}):e._e(),e.isShowScrollbar&&e.mindMap?t("Scrollbar",{attrs:{mindMap:e.mindMap}}):e._e(),e.mindMap?t("FormulaSidebar",{attrs:{mindMap:e.mindMap}}):e._e(),e.mindMap?t("SourceCodeEdit",{attrs:{mindMap:e.mindMap}}):e._e(),e.showDragMask?t("div",{staticClass:"dragMask",on:{dragleave:function(t){return t.stopPropagation(),t.preventDefault(),e.onDragleave.apply(null,arguments)},dragover:function(e){e.stopPropagation(),e.preventDefault()},drop:function(t){return t.stopPropagation(),t.preventDefault(),e.onDrop.apply(null,arguments)}}},[t("div",{staticClass:"dragTip"},[e._v(e._s(e.$t("edit.dragTip")))])]):e._e()],1)},d=[],r=a("c83b"),l=a("5733"),h=a("1350"),c=a("f62f"),m=a("08c6"),u=a("64ff"),p=a("7b09"),g=a("34b4"),M=a("98cf"),b=a("7ab4"),f=a("1ab9"),S=a("39cb"),w=a("a330"),_=a("9b90"),v=a("b7c1"),x=a("71c1"),$=a("18b5"),D=a("4397"),T=a("d5d6"),C=a("384d"),P=a("f319"),y=a("4181"),L=a("8660"),E=a("15b8"),N=a("f010"),k=a("d5b5"),R=a("2a71"),O=a("412e"),I=a("4032"),j=a("8ede"),F=a("365c"),H=a("8c3c"),A=a("c463"),U=a("574f"),K=a("2f62"),Z=a("d1f7"),z=a("e7f4"),B=(a("331a"),a("aadb"),a("41cb"),a("c0d6"),a("9225"),a("aaa6")),W=a("ee5c"),q=a("5012"),J=a("1227"),G=a("3908"),Q=a("e1ba"),V=a("e459"),X=a("c581"),Y=a("7e64"),ee=a("be13"),te=a("39a9");r["a"].usePlugin(l["a"]).usePlugin(h["a"]).usePlugin(g["a"]).usePlugin(c["a"]).usePlugin(m["a"]).usePlugin(u["a"]).usePlugin(p["a"]).usePlugin(M["a"]).usePlugin(f["a"]).usePlugin(w["a"]).usePlugin(S["a"]).usePlugin(_["a"]).usePlugin(v["a"]).usePlugin($["a"]).usePlugin(D["a"]).usePlugin(T["a"]),z["a"].forEach(e=>{r["a"].defineTheme(e.value,e.theme)});var ae={name:"Edit",components:{OutlineSidebar:C["a"],Style:P["a"],BaseStyle:y["a"],Theme:L["a"],Structure:E["a"],Count:N["a"],NavigatorToolbar:k["a"],ShortcutKey:R["a"],Contextmenu:O["a"],RichTextToolbar:I["a"],NodeNoteContentShow:j["a"],Navigator:H["a"],NodeImgPreview:A["a"],SidebarTrigger:U["a"],Search:B["a"],NodeIconSidebar:W["a"],NodeIconToolbar:q["a"],OutlineEdit:J["a"],Scrollbar:V["a"],FormulaSidebar:Y["a"],SourceCodeEdit:ee["a"],NodeAttachment:te["a"]},data(){return{enableShowLoading:!0,mindMap:null,mindMapData:null,prevImg:"",storeConfigTimer:null,showDragMask:!1}},computed:{...Object(K["d"])({isZenMode:e=>e.localConfig.isZenMode,openNodeRichText:e=>e.localConfig.openNodeRichText,isShowScrollbar:e=>e.localConfig.isShowScrollbar,useLeftKeySelectionRightKeyDrag:e=>e.localConfig.useLeftKeySelectionRightKeyDrag,isUseHandDrawnLikeStyle:e=>e.localConfig.isUseHandDrawnLikeStyle,extraTextOnExport:e=>e.extraTextOnExport})},watch:{openNodeRichText(){this.openNodeRichText?this.addRichTextPlugin():this.removeRichTextPlugin()},isShowScrollbar(){this.isShowScrollbar?this.addScrollbarPlugin():this.removeScrollbarPlugin()},isUseHandDrawnLikeStyle(){this.isUseHandDrawnLikeStyle?this.addHandDrawnLikeStylePlugin():this.removeHandDrawnLikeStylePlugin()}},mounted(){Object(G["b"])(),this.getData(),this.init(),this.$bus.$on("execCommand",this.execCommand),this.$bus.$on("paddingChange",this.onPaddingChange),this.$bus.$on("export",this.export),this.$bus.$on("setData",this.setData),this.$bus.$on("startTextEdit",this.handleStartTextEdit),this.$bus.$on("endTextEdit",this.handleEndTextEdit),this.$bus.$on("createAssociativeLine",this.handleCreateLineFromActiveNode),this.$bus.$on("startPainter",this.handleStartPainter),this.$bus.$on("node_tree_render_end",this.handleHideLoading),this.$bus.$on("showLoading",this.handleShowLoading),window.addEventListener("resize",this.handleResize)},beforeDestroy(){this.$bus.$off("execCommand",this.execCommand),this.$bus.$off("paddingChange",this.onPaddingChange),this.$bus.$off("export",this.export),this.$bus.$off("setData",this.setData),this.$bus.$off("startTextEdit",this.handleStartTextEdit),this.$bus.$off("endTextEdit",this.handleEndTextEdit),this.$bus.$off("createAssociativeLine",this.handleCreateLineFromActiveNode),this.$bus.$off("startPainter",this.handleStartPainter),this.$bus.$off("node_tree_render_end",this.handleHideLoading),this.$bus.$off("showLoading",this.handleShowLoading),window.removeEventListener("resize",this.handleResize),this.mindMap.destroy()},methods:{handleStartTextEdit(){this.mindMap.renderer.startTextEdit()},handleEndTextEdit(){this.mindMap.renderer.endTextEdit()},handleCreateLineFromActiveNode(){this.mindMap.associativeLine.createLineFromActiveNode()},handleStartPainter(){this.mindMap.painter.startPainter()},handleResize(){this.mindMap.resize()},handleShowLoading(){this.enableShowLoading=!0,Object(G["b"])()},handleHideLoading(){this.enableShowLoading&&(this.enableShowLoading=!1,Object(G["a"])())},getData(){let e=Object(F["a"])();this.mindMapData=e},bindSaveEvent(){this.$bus.$on("data_change",e=>{Object(F["e"])(e)}),this.$bus.$on("view_data_change",e=>{clearTimeout(this.storeConfigTimer),this.storeConfigTimer=setTimeout(()=>{Object(F["d"])({view:e})},300)})},manualSave(){let e=this.mindMap.getData(!0);Object(F["d"])(e)},init(){let e=this.hasFileURL(),{root:t,layout:i,theme:n,view:o,config:s}=this.mindMapData;e&&(t={data:{text:this.$t("edit.root")},children:[]},i=X["a"].layout,n=X["a"].theme,o=null),this.mindMap=new r["a"]({el:this.$refs.mindMapContainer,data:t,fit:!1,layout:i,theme:n.template,themeConfig:n.config,viewData:o,nodeTextEditZIndex:1e3,nodeNoteTooltipZIndex:1e3,customNoteContentShow:{show:(e,t,a,i)=>{this.$bus.$emit("showNoteContent",e,t,a,i)},hide:()=>{}},...s||{},iconList:[...Z["a"]],useLeftKeySelectionRightKeyDrag:this.useLeftKeySelectionRightKeyDrag,customInnerElsAppendTo:null,enableAutoEnterTextEditWhenKeydown:!0,customHandleClipboardText:Q["a"],defaultNodeImage:a("24d1"),initRootNodePosition:["center","center"],handleIsSplitByWrapOnPasteCreateNewNode:()=>this.$confirm(this.$t("edit.splitByWrap"),this.$t("edit.tip"),{confirmButtonText:this.$t("edit.yes"),cancelButtonText:this.$t("edit.no"),type:"warning"}),errorHandler:(e,t)=>{switch(console.error(t),e){case"export_error":this.$message.error(this.$t("edit.exportError"));break;default:break}},addContentToFooter:()=>{const e=this.extraTextOnExport.trim();if(!e)return null;const t=document.createElement("div");t.className="footer",t.innerHTML=e;const a="\n            .footer {\n              width: 100%;\n              height: 30px;\n              display: flex;\n              justify-content: center;\n              align-items: center;\n              font-size: 12px;\n              color: #979797;\n            }\n          ";return{el:t,cssText:a,height:30}}}),this.openNodeRichText&&this.addRichTextPlugin(),this.isShowScrollbar&&this.addScrollbarPlugin(),this.isUseHandDrawnLikeStyle&&this.addHandDrawnLikeStylePlugin(),this.mindMap.keyCommand.addShortcut("Control+s",()=>{this.manualSave()}),["node_active","data_change","view_data_change","back_forward","node_contextmenu","node_click","draw_click","expand_btn_click","svg_mousedown","mouseup","mode_change","node_tree_render_end","rich_text_selection_change","transforming-dom-to-images","generalization_node_contextmenu","painter_start","painter_end","scrollbar_change","scale","translate","node_attachmentClick","node_attachmentContextmenu","demonstrate_jump","exit_demonstrate"].forEach(e=>{this.mindMap.on(e,(...t)=>{this.$bus.$emit(e,...t)})}),this.bindSaveEvent(),this.testDynamicCreateNodes(),window.takeOverApp&&this.$bus.$emit("app_inited",this.mindMap),e&&this.$bus.$emit("handle_file_url"),this.cooperateTest()},hasFileURL(){const e=this.$route.query.fileURL;return!!e&&/\.(smm|json|xmind|md|xlsx)$/.test(e)},setData(e){this.handleShowLoading(),e.root?this.mindMap.setFullData(e):this.mindMap.setData(e),this.mindMap.view.reset(),this.manualSave()},reRender(){this.mindMap.reRender()},execCommand(...e){this.mindMap.execCommand(...e)},async export(...e){try{Object(G["b"])(),await this.mindMap.export(...e),Object(G["a"])()}catch(t){console.log(t),Object(G["a"])()}},onPaddingChange(e){this.mindMap.updateConfig(e)},showNewFeatureInfo(){let e=localStorage.getItem("SIMPLE_MIND_MAP_NEW_FEATURE_TIP_1");e||this.$notify.info({title:this.$t("edit.newFeatureNoticeTitle"),message:this.$t("edit.newFeatureNoticeMessage"),duration:0,onClose:()=>{localStorage.setItem("SIMPLE_MIND_MAP_NEW_FEATURE_TIP_1",!0)}})},addRichTextPlugin(){this.mindMap&&this.mindMap.addPlugin(b["a"])},removeRichTextPlugin(){this.mindMap.removePlugin(b["a"])},addScrollbarPlugin(){this.mindMap&&this.mindMap.addPlugin(x["a"])},removeScrollbarPlugin(){this.mindMap.removePlugin(x["a"])},addHandDrawnLikeStylePlugin(){try{if(!this.mindMap)return;this.mindMap.addPlugin(HandDrawnLikeStyle),this.mindMap.reRender()}catch(e){console.log("手绘风格插件不存在")}},removeHandDrawnLikeStylePlugin(){try{this.mindMap.removePlugin(HandDrawnLikeStyle),this.mindMap.reRender()}catch(e){console.log("手绘风格插件不存在")}},testDynamicCreateNodes(){setTimeout(()=>{},5e3)},cooperateTest(){this.mindMap.cooperate&&this.$route.query.userName&&(this.mindMap.cooperate.setProvider(null,{roomName:"demo-room",signalingList:["ws://10.16.83.118:4444"]}),this.mindMap.cooperate.setUserInfo({id:Math.random(),name:this.$route.query.userName,color:["#409EFF","#67C23A","#E6A23C","#F56C6C","#909399"][Math.floor(5*Math.random())],avatar:Math.random()>.5?"https://img0.baidu.com/it/u=4270674549,2416627993&fm=253&app=138&size=w931&n=0&f=JPEG&fmt=auto?sec=1696006800&t=4d32871d14a7224a4591d0c3c7a97311":""}))},onDragenter(){this.showDragMask=!0},onDragleave(){this.showDragMask=!1},onDrop(e){this.showDragMask=!1;const t=e.dataTransfer,a=t.files&&t.files[0];this.$bus.$emit("importFile",a)}}},ie=ae,ne=(a("9504"),a("2877")),oe=Object(ne["a"])(ie,s,d,!1,null,"170c54da",null),se=oe.exports,de={name:"Index",components:{Toolbar:o["a"],Edit:se},data(){return{show:!1}},computed:{...Object(K["d"])({isZenMode:e=>e.localConfig.isZenMode,isDark:e=>e.localConfig.isDark,activeSidebar:e=>e.activeSidebar})},watch:{isDark(){this.setBodyDark()}},async created(){this.initLocalConfig();const e=this.$loading({lock:!0,text:this.$t("other.loading")});await this.getUserMindMapData(),this.show=!0,e.close(),this.setBodyDark()},methods:{...Object(K["b"])(["getUserMindMapData"]),...Object(K["c"])(["setLocalConfig"]),initLocalConfig(){let e=Object(F["c"])();e&&this.setLocalConfig({...this.$store.state.localConfig,...e})},setBodyDark(){this.isDark?document.body.classList.add("isDark"):document.body.classList.remove("isDark")}}},re=de,le=(a("e587"),Object(ne["a"])(re,i,n,!1,null,null,null));t["default"]=le.exports},"7c82":function(e,t,a){},9504:function(e,t,a){"use strict";a("7c82")},e587:function(e,t,a){"use strict";a("1957")}}]);